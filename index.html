<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Canvas与Image互相转换示例</title>
</head>    <style>

 

        #imgbox{overflow:auto;}

        #imgbox span{
            display: inline-block;
            width: 500px;
            height: 200px;
            background: url('./565.svg') no-repeat center center;
        }

         

  </style>
<body>
<!-- 
    <img src="./photo_icon2.png" alt="" id="photo" width="" height="">
    <div id="canvasDiv" style="width: 300px;"></div>
    <div id="convertedImg" style="width: 400px; height:400px; border: 1px solid #111">
        <img src="" alt="" id = "dsfsdf" width="100%" height="100%">
    </div>

    <div id = "imgbox">
        <span></span>
        <img src="./565.svg" alt="" width="60" height="100">
    </div> -->
    <div id="content" style="height:150px;line-height:150px;text-align:center; color: #fff;background-color:#ccc;font-size:80px;"></div>

    <script>
        // window.onload = function() {

        //     // 把image转换为canvas对象
        //     var photo = document.getElementById('photo');//这个必须用原生
        //     var cDiv = convertImageToCanvas(photo);
        //     document.getElementById('canvasDiv').append(cDiv);

        //     // image-->canvas
        //     function convertImageToCanvas(image){
        //         //创建canvas DOM对象,并设置其宽高和图片一样
        //         var canvas = document.createElement("canvas");
        //         // canvas.width = image.width;
        //         // canvas.height = image.height;
        //         canvas.width = 800;
        //         canvas.height = 800;
        //         //坐标(0,0)表示从此处开始绘制,相当于偏移
        //         canvas.getContext("2d").drawImage(image,0,0);
        //         return canvas;
        //     }
        //     // 把canvas转换为image的
        //     var myCanvas = document.getElementsByTagName("canvas")[0];
        //     var img = convertCanvasToImage(myCanvas);
        //     document.getElementById('dsfsdf').setAttribute('src', img);

        //     // canvas-->image
        //     function convertCanvasToImage(canvas){
        //         //新Image对象,可以理解为DOM;
        //         // var image = new Image();
        //         //canvas.toDataURL返回的是一串Base64编码的URL,当然,浏览器自己肯定支持
        //         // canvas.width=100;
        //         // canvas.height=100;
        //         //指定格式PNG
        //         // image.src = canvas.toDataURL("image/png");
        //         return canvas.toDataURL("image/png");
        //     }

        // }
        
        let num = 1;
        let content = document.getElementById('content');
    
        function count() {
            content.innerHTML = num++;
        };
        content.onmousemove = debounce(count, 1000);
        function debounce(func, wait) {
            let timeout;
            return function () {
                let context = this;
                let args = arguments;

                if (timeout) clearTimeout(timeout);
                
                timeout = setTimeout(() => {
                    func.apply(context, args)
                }, wait);
            }
        }

        function debounce(func,wait) {
            let timeout;
            return function () {
                let context = this;
                let args = arguments;

                if (timeout) clearTimeout(timeout);

                let callNow = !timeout;
                timeout = setTimeout(() => {
                    timeout = null;
                }, wait)

                if (callNow) func.apply(context, args)
            }
        }
/**
 * @desc 函数防抖
 * @param func 函数
 * @param wait 延迟执行毫秒数
 * @param immediate true 表立即执行，false 表非立即执行
 */
 function debounce(func,wait,immediate) {
    let timeout;

    return function () {
        let context = this;
        let args = arguments;

        if (timeout) clearTimeout(timeout);
        if (immediate) {
            var callNow = !timeout;
            timeout = setTimeout(() => {
                timeout = null;
            }, wait)
            if (callNow) func.apply(context, args)
        }
        else {
            timeout = setTimeout(function(){
                func.apply(context, args)
            }, wait);
        }
    }
}

function throttle(func, wait) {
    let previous = 0;
    return function() {
        let now = Date.now();
        let context = this;
        let args = arguments;
        if (now - previous > wait) {
            func.apply(context, args);
            previous = now;
        }
    }
}

function throttle(func, wait) {
    let timeout;
    return function() {
        let context = this;
        let args = arguments;
        if (!timeout) {
            timeout = setTimeout(() => {
                timeout = null;
                func.apply(context, args)
            }, wait)
        }

    }
}
/**
 * @desc 函数节流
 * @param func 函数
 * @param wait 延迟执行毫秒数
 * @param type 1 表时间戳版，2 表定时器版
 */
 function throttle(func, wait ,type) {
    if(type===1){
        let previous = 0;
    }else if(type===2){
        let timeout;
    }
    return function() {
        let context = this;
        let args = arguments;
        if(type===1){
            let now = Date.now();

            if (now - previous > wait) {
                func.apply(context, args);
                previous = now;
            }
        }else if(type===2){
            if (!timeout) {
                timeout = setTimeout(() => {
                    timeout = null;
                    func.apply(context, args)
                }, wait)
            }
        }
    }
}

var messageConfunc = function(message) {
    debugger
                if (typeof message !== 'string') {
                    console.error('接口参数类型错误，只能为字符串', message);
                    message = message.toString();
                }
                // console.warn('接口地址上的参数使用{$1}{$2}代替,传入(type,$1,$2)')
                var parmArr = [].slice.call(arguments);
                parmArr.shift();
                message = message.replace(/{[a-zA-Z0-9\$]+}/g, function() {
                    return parmArr.shift()
                })
                return message;
            }
            messageConfunc('我{$1}{$2}','好','开心')
</script>
</body>
</html>